{"widgetList":[{"key":45846,"type":"grid","category":"container","icon":"grid","cols":[{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":32765,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"documentType","label":"search_documentType","labelAlign":"","defaultValue":"Invoice","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":true,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"const _this = this\n$api.post('/nuxeo/types', {}).then(res => {\n   res = res.data.data\n  const reponse = res.map(item => ({\n    value: item.name,\n    label: item.name,\n    metaList: item.keywords\n  }))\n  _this.loadOptions(reponse)\n}).catch(err => {\n})","onRemoteQuery":"","onChange":"const _this = this\nasync function getMetaList() {\n  let docTypeList = []\n  while(!docTypeList || docTypeList.length == 0) {\n    await new Promise(resolve => setTimeout(async () => {\n        docTypeList = _this.getOptionItems()\n        resolve(500)\n    }, 500))\n  }\n  const docItem = docTypeList.find(item => item.value === value)\n  return docItem.metaList.map(item => ({\n    value: item.name,\n    label: `Metadata/${item.name}`\n  }))\n  \n}\nasync function setMetaList() {\n  const metaList = await getMetaList()\n  const displayListWidget = _this.getWidgetRef('displayList')\n  const rowIdData = displayListWidget.rowIdData\n  const refList = displayListWidget.refList\n  rowIdData.forEach(item => {\n    refList[`meta@row${item}`].loadOptions(metaList)\n  })\n}\nsetMetaList()","onFocus":"","onBlur":"","onValidate":""},"id":"select51475"}],"options":{"name":"gridCol65344","hidden":false,"span":20,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-65344"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":105841,"type":"color","icon":"color-field","formItemFlag":true,"options":{"name":"color46526","label":"color","labelAlign":"","defaultValue":null,"columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onChange":"","onValidate":""},"id":"color46526"}],"options":{"name":"gridCol63034","hidden":false,"span":4,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-63034"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":100816,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"user","label":"setting_user","labelAlign":"","defaultValue":"","placeholder":"dashboard.allUser","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":false,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"$api.post('/nuxeo/identity/users', {}).then(res => {\n   res = res.data.data\n  const reponse = res.map(item => ({\n    value: item.username,\n    label: item.username\n  }))\n  this.loadOptions(reponse)\n}).catch(err => {\n})","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select38157"}],"options":{"name":"gridCol58343","hidden":false,"span":24,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":""},"id":"grid-col-58343"}],"options":{"name":"grid115925","hidden":false,"gutter":12,"colHeight":null,"customClass":[]},"id":"grid115925"},{"key":43670,"type":"grid","category":"container","icon":"grid","cols":[{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":51254,"type":"switch","icon":"switch-field","formItemFlag":true,"options":{"name":"showCount","label":"dashboard.showCount","labelAlign":"","defaultValue":true,"columnWidth":"200px","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"switchWidth":40,"activeText":"","inactiveText":"","activeColor":null,"inactiveColor":null,"onCreated":"","onMounted":"","onChange":"","onValidate":""},"id":"switch98733"}],"options":{"name":"gridCol109775","hidden":false,"span":12,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":""},"id":"grid-col-109775"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":51254,"type":"switch","icon":"switch-field","formItemFlag":true,"options":{"name":"showSize","label":"dashboard.showSize","labelAlign":"","defaultValue":true,"columnWidth":"200px","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"customClass":"","labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"switchWidth":40,"activeText":"","inactiveText":"","activeColor":null,"inactiveColor":null,"onCreated":"","onMounted":"","onChange":"","onValidate":""},"id":"switch78086"}],"options":{"name":"gridCol64155","hidden":false,"span":12,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":""},"id":"grid-col-64155"}],"options":{"name":"grid26927","hidden":false,"gutter":12,"colHeight":null,"customClass":[]},"id":"grid26927"},{"key":48321,"type":"divider","icon":"divider","formItemFlag":false,"options":{"name":"divider73895","label":"","columnWidth":"200px","direction":"horizontal","contentPosition":"center","hidden":false,"customClass":"","onCreated":"","onMounted":""},"id":"divider73895"},{"key":81111,"type":"sub-form","category":"container","icon":"sub-form","widgetList":[{"key":50016,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"meta","label":"dashboard.chartType","labelAlign":"","defaultValue":"","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":true,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":["chartType"],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select102301"}],"options":{"name":"displayList","showBlankRow":false,"showRowNumber":false,"labelAlign":"label-left-align","hidden":false,"customClass":["sub-form-x-scroll"],"onSubFormRowAdd":"const _this = this\nasync function getMetaList() {\n  let docTypeList = []\n  const docTypeWidget = _this.getWidgetRef('documentType')\n  const docType = docTypeWidget.getValue()\n  while(!docTypeList || docTypeList.length == 0) {\n    await new Promise(resolve => setTimeout(async () => {\n        docTypeList = docTypeWidget.getOptionItems()\n        resolve(500)\n    }, 500))\n  }\n  const docItem = docTypeList.find(item => item.value === docType)\n  return docItem.metaList.map(item => ({\n    value: item.name,\n    label: `Metadata/${item.name}`\n  }))\n  \n}\nconsole.log(this, subFormData, newRowId)\nasync function setMetaList() {\n  const metaList = await getMetaList()\nconsole.log(metaList, 'onSubFormRowAdd')\n  const displayListWidget = _this.getWidgetRef('displayList')\n  const rowIdData = displayListWidget.rowIdData\n  const refList = displayListWidget.refList\n  console.log(refList, '????????????????????')\n  refList[`meta@row${newRowId}`].loadOptions(metaList)\n\n}\nsetMetaList()","onSubFormRowInsert":"","onSubFormRowDelete":"","onSubFormRowChange":""},"id":"subform49615"},{"key":78806,"type":"divider","icon":"divider","formItemFlag":false,"options":{"name":"divider94400","label":"","columnWidth":"200px","direction":"horizontal","contentPosition":"center","hidden":false,"customClass":[],"onCreated":"","onMounted":""},"id":"divider94400"}],"formConfig":{"modelName":"formData","refName":"vForm","rulesName":"rules","labelWidth":80,"labelPosition":"top","size":"","labelAlign":"label-left-align","cssCode":".sub-form-x-scroll {\n  overflow-x: auto;\n}\n.sub-form-x-scroll .el-row{\n  display: flex;\n  flex-direction: row-reverse;\n  \n}\n.sub-form-x-scroll .el-row div:nth-of-type(2){\n  flex: 1;\n}\n\n.sub-form-x-scroll .action-button-column .el-button:nth-of-type(1) {\n  display: none!important;\n}","customClass":[],"functions":"","layoutType":"PC","jsonVersion":3,"onFormCreated":"","onFormMounted":"","onFormDataChange":"","onFormValidate":"","saveRemoteOptions":"never","labelFormUniqueName":true,"dataSources":[]}}