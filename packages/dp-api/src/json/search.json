{"widgetList":[{"key":85485,"type":"switch","icon":"switch-field","formItemFlag":true,"options":{"name":"ready","label":"ready","labelAlign":"","defaultValue":false,"columnWidth":"200px","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"switchWidth":40,"activeText":"","inactiveText":"","activeColor":null,"inactiveColor":null,"onCreated":"","onMounted":"","onChange":"","onValidate":""},"id":"switch7981"},{"type":"grid","category":"container","icon":"grid","cols":[{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":19957,"type":"input","icon":"text-field","formItemFlag":true,"options":{"name":"paramsInTextSearch","label":"search_keyword","labelAlign":"","type":"text","defaultValue":"","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"readonly":false,"disabled":false,"hidden":false,"clearable":true,"showPassword":false,"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"minLength":null,"maxLength":null,"showWordLimit":false,"prefixIcon":"","suffixIcon":"","appendButton":false,"appendButtonDisabled":false,"buttonIcon":"custom-search","onCreated":"","onMounted":"","onInput":"","onChange":"","onFocus":"","onBlur":"","onValidate":"","onAppendButtonClick":""},"id":"input50504"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"textSearchType","label":"searchType","labelZh":"搜索類型","labelAlign":"","defaultValue":"full text search","placeholder":"","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":false,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"const _this = this\n$api.get('/nuxeo/search/textSearchTypes', {}).then(res => {\n const reponse = res.data.data.map(item => ({\n   value: item,\n   label: $t('searchType_'+item)\n }))\n if(reponse.length > 0){\n _this.setValue(reponse[0].value)\n }\n _this.loadOptions(reponse)\n}).catch(err => {\n})","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select75183"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"type","label":"search_documentType","labelZh":"文档类型","labelAlign":"","defaultValue":[],"placeholder":"dpTip_all","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":true,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"$api.post('/nuxeo/types', {}).then(res => {\n   res = res.data.data\n  const reponse = res.map(item => ({\n    value: item.name,\n    label: $t(item.name)\n  }))\n  reponse.sort((a, b) => a.label.localeCompare(b.label))\n  this.loadOptions(reponse)\n}).catch(err => {\n  console.log(err)\n})","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select105463"},{"key":103664,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"creator","label":"search_authors","labelAlign":"","defaultValue":[],"placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":true,"multipleLimit":0,"optionItems":[{"label":"select 1","value":1},{"label":"select 2","value":2},{"label":"select 3","value":3}],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select75344"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"authors","label":"search_contributors","labelZh":"作者","labelAlign":"label-left-align","defaultValue":[],"placeholder":"dpTip_all","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":true,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"const _this = this\nconst creatorRef = _this.getWidgetRef('creator')\n$api.post('/nuxeo/identity/getKeyCloakAllUsers', {}).then(res => {\n  res = res.data.data\n  const result = []\n  res.forEach(item => {\n    if(item.username || item.userId) {\n      result.push({\n        value: item.userId || item.username,\n        label: item.username\n      })\n    }\n  })\n  result.sort((a, b) => a.label.localeCompare(b.label))\n  _this.loadOptions(result)\n  creatorRef.loadOptions(result)\n}).catch(err => {\n})","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select59109"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"includeFolder","label":"search_includeFolder","labelZh":"","labelAlign":"","defaultValue":"","placeholder":"dpTip_all","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":false,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[{"label":"Yes","value":"true"},{"label":"No","value":"false"}],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"const options = [\n    { label: $t('searchType_includeFolder_1'), value: 'true' },\n    { label: $t('searchType_includeFolder_0'), value: 'false' },\n]\nthis.loadOptions(options)\n","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select104206"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"assetType","label":"search_assetType","labelZh":"","labelAlign":"","defaultValue":"","placeholder":"dpTip_all","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[{"label":"Picture","value":"Picture"},{"label":"Video","value":"Video"},{"label":"Audio","value":"Audio"}],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"const _this = this\nsetTimeout(function() {\n  const options = [\n      { label: $t('searchType_Picture'), value: 'Picture' },\n      { label: $t('searchType_Video'), value: 'Video' },\n      { label: $t('searchType_Audio'), value: 'Audio' }\n  ]\n  _this.loadOptions(options)\n}, 10);\n","onMounted":"","onRemoteQuery":"","onChange":"const _this = this\nconst showList = {\n  Picture: [\n    { key: 'height', setNull: true },\n    { key: 'width', setNull: true },\n    { key: 'mimeType', setNull: true }\n  ],\n  Video: [\n    { key: 'height', setNull: true },\n    { key: 'width', setNull: true },\n    { key: 'mimeType', setNull: true },\n    { key: 'duration', setNull: true }\n  ],\n  Audio: [\n    { key: 'mimeType', setNull: true },\n  ],\n  all: [\n    { key: 'includeFolder', setNull: true },\n  ]\n}\nfunction handleShow() {\n  const mediaType = value ? value : 'all'\n  let curList = []\n  let handleList = []\n  Object.keys(showList).forEach(sKey => {\n    showList[sKey].forEach(item => {\n      if(sKey === mediaType) curList.push({ ...item, setNull: value !== oldValue, isHidden: false })\n      else if(!handleList.find(hItem => hItem.key === item.key)) handleList.push({ ...item, isHidden: true})\n  })\n  })\n  curList.forEach(item => {\n    const data = handleList.find(hItem => item.key === hItem.key)\n    if(data) {\n      data.isHidden = item.isHidden\n      data.setNull = item.setNull\n    }\n    else handleList.push(item)\n  })\n  handleList.forEach(item => { setShow(item.key, item.isHidden, item.setNull ) })\n}\nfunction setShow(key, isHidden, setNull) {\n  const keyRef = _this.getWidgetRef(key)\n  if(!keyRef) return\n  keyRef.setHidden(isHidden)\n  if(setNull) keyRef.setValue(null)\n}\n\nhandleShow()\nif(value) {\n  const response = $api.get(`/nuxeo/search/getSearchExtends?primaryType=${value}`);\n  response.then(res => {\n    const searchExtends = res.data.data\n    Object.keys(searchExtends).forEach(key => {\n      const searchExtendItem = searchExtends[key]\n      const keyRef = _this.getWidgetRef(key)\n      if(!keyRef) return\n      const options = Object.keys(searchExtendItem).map( item => ({\n        label: item, \n        value:item\n      }));\n      keyRef.loadOptions(options);\n    })\n  })\n}\n","onFocus":"","onBlur":"","onValidate":""},"id":"select63027"}],"options":{"name":"gridCol64828","hidden":false,"span":24,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-64828"}],"options":{"name":"grid22081","hidden":false,"gutter":12,"colHeight":null,"customClass":""},"id":"grid22081"},{"key":80945,"type":"grid","category":"container","icon":"grid","cols":[{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"height","label":"search_hight","labelZh":"","labelAlign":"","defaultValue":"","placeholder":"","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"clearable":true,"filterable":false,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select93029"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"mimeType","label":"search_mimeType","labelZh":"","labelAlign":"","defaultValue":"","placeholder":"","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"clearable":true,"filterable":false,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select28003"}],"options":{"name":"gridCol100044","hidden":false,"span":12,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-100044"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"width","label":"search_width","labelZh":"","labelAlign":"","defaultValue":"","placeholder":"","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"clearable":true,"filterable":false,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select38484"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"duration","label":"search_duration","labelZh":"","labelAlign":"","defaultValue":"","placeholder":"","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"clearable":true,"filterable":false,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select70361"}],"options":{"name":"gridCol51894","hidden":false,"span":12,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":""},"id":"grid-col-51894"}],"options":{"name":"grid87135","hidden":false,"gutter":12,"colHeight":null,"customClass":[]},"id":"grid87135"},{"key":95907,"type":"divider","icon":"divider","formItemFlag":false,"options":{"name":"divider62757","label":"","columnWidth":"200px","direction":"horizontal","contentPosition":"center","hidden":false,"customClass":"","onCreated":"","onMounted":""},"id":"divider62757"},{"type":"grid","category":"container","icon":"grid","cols":[{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"modified","label":"search_modificationDate","labelZh":"更新时间","labelAlign":"","defaultValue":"","placeholder":"dpTip_all","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[{"label":"Last 24h","value":"last24h"},{"label":"Last week","value":"lastWeek"},{"label":"Last month","value":"lastMonth"},{"label":"Last year","value":"lastYear"},{"label":"More than 1 year ago","value":"priorToLastYear"}],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"const options = [\n    { label: $t('searchType_last24h'), value: 'last24h' },\n    { label: $t('searchType_lastWeek'), value: 'lastWeek' },\n    { label: $t('searchType_lastMonth'), value: 'lastMonth' },\n    { label: $t('searchType_lastYear'), value: 'lastYear' },\n    { label: $t('searchType_priorToLastYear'), value: 'priorToLastYear' },\n]\nthis.loadOptions(options)","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select54847"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"collections","label":"search_collections","labelZh":"search_collections","labelAlign":"","defaultValue":[],"placeholder":"dpTip_all","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":false,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":true,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"$api.get('/nuxeo/collection/all').then(res => {\n   res = res.data.data\n  const reponse = res.map(item => ({\n    value: item.id,\n    label: item.name\n  }))\n  reponse.sort((a, b) => a.label.localeCompare(b.label))\n  this.loadOptions(reponse)\n}).catch(err => {\n})","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select64376"}],"options":{"name":"gridCol56812","hidden":false,"span":12,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":""},"id":"grid-col-56812"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"size","label":"search_size","labelZh":"文件大小","labelAlign":"","defaultValue":"","placeholder":"dpTip_all","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[{"label":"Less than 100 KB","value":"100"},{"label":"Between 100 KB and 1 MB","value":"1000"},{"label":"Between 1 MB and 10 MB","value":"10000"},{"label":"Between 10 MB and 100 MB","value":"100000"},{"label":"More than 100 MB","value":"1000000"}],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"const options = [\n    { label: $t('searchType_100'), value: '100' },\n    { label: $t('searchType_1000'), value: '1000' },\n    { label: $t('searchType_10000'), value: '10000' },\n    { label: $t('searchType_100000'), value: '100000' },\n    { label: $t('searchType_1000000'), value: '1000000' },\n]\nthis.loadOptions(options)","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select80655"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"tags","label":"search_tags","labelZh":"标签","labelAlign":"","defaultValue":[],"placeholder":"dpTip_all","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":true,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":"","labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"$api.post('/nuxeo/tags/getAllTags', {}).then(res => {\n   res = res.data.data\n  const reponse = res.map(item => ({\n    value: item,\n    label: item\n  }))\n  reponse.sort((a, b) => a.label.localeCompare(b.label))\n  this.loadOptions(reponse)\n}).catch(err => {\n})","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select55898"}],"options":{"name":"gridCol26217","hidden":false,"span":12,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-26217"}],"options":{"name":"grid80491","hidden":false,"gutter":12,"colHeight":null,"customClass":""},"id":"grid80491"}],"formConfig":{"modelName":"formData","refName":"vForm","rulesName":"rules","labelWidth":80,"labelPosition":"top","size":"","labelAlign":"label-left-align","cssCode":"","customClass":"","functions":"","layoutType":"PC","jsonVersion":3,"onFormCreated":"","onFormMounted":"","onFormDataChange":"","onFormValidate":"","saveRemoteOptions":"never","labelFormUniqueName":true,"dataSources":[]}}