{"widgetList":[{"type":"grid","category":"container","icon":"grid","cols":[{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"assetType","label":"search_assetType","labelZh":"","labelAlign":"","defaultValue":"All","placeholder":"","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":false,"filterable":false,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[{"label":"All","value":""},{"label":"Picture","value":"Picture"},{"label":"Video","value":"Video"},{"value":"Audio","label":"Audio"}],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"// get component of type\nconst docType = this.getWidgetRef('type');\nconst author = this.getWidgetRef('authors');\nconst modified = this.getWidgetRef('modified');\nconst includeFolder = this.getWidgetRef('includeFolder');\nconst collections = this.getWidgetRef('collections');\nconst tags = this.getWidgetRef('tags');\nconst size = this.getWidgetRef('size');\n\n// picture or Video\nconst mimeType = this.getWidgetRef('mimeType');\nconst hight = this.getWidgetRef('hight');\nconst width = this.getWidgetRef('width');\nconst duration = this.getWidgetRef('duration');\n\nconst allEnableList = [docType, author, modified, includeFolder, collections, tags, size ];\nconst allHiddenList = [mimeType, hight, width, duration];\n\nconst pictureEnableList = [author, mimeType, hight, width, modified, size, collections,tags]\nconst pictureHiddenList = [docType, includeFolder, duration ]\n\nconst videoEnableList = [author, mimeType, hight, width, duration, modified, size, collections,tags,]\nconst videoHiddenList = [docType, includeFolder, duration ]\n\nconst auidioEnableList = [author, mimeType,  duration, modified, size, collections,tags,]\nconst audioHiddenList = [docType, includeFolder, hight, width, ]\nswitch (value) {\n  \n  case 'Video':\n     lootWidgetItem(videoHiddenList, true, true);\n    lootWidgetItem(videoEnableList, false, false);\n    break;\n  case 'Picture':\n    lootWidgetItem(pictureHiddenList, true, true);\n    lootWidgetItem(pictureEnableList, false, false);\n    break;\n  case 'Audio':\n    lootWidgetItem(audioHiddenList, true, true);\n    lootWidgetItem(auidioEnableList, false, false);\n    break;\n  default :\n    lootWidgetItem(allHiddenList, true, true);\n    lootWidgetItem(allEnableList, false, false);\n    break;\n}\nfunction lootWidgetItem(widgetList, isHidden, setNull) {\n  widgetList.forEach(widgetItem => {\n    if(widgetItem) {\n      widgetItem.setHidden(isHidden)\n      if(setNull) {\n        widgetItem.setValue(null);\n      }\n    }\n  })\n}\nif(value !== 'All') {\n  const response = $api.get(`nuxeo/search/getSearchExtends?primaryType=${value}`);\n  response.then(res => {\n    if(res.data.data.mimeType) {\n      const options = Object.keys(res.data.data.mimeType).map( item => ({label:item, value:item}));\n      mimeType.loadOptions(options);\n    }\n    if(res.data.data.hight) {\n      const options = Object.keys(res.data.data.hight).map( item => ({label:item, value:item}));\n      hight.loadOptions(options)\n    }\n    if(res.data.data.duration) {\n      const options = Object.keys(res.data.data.duration).map( item => ({label:item, value:item}));\n      duration.loadOptions(options)\n    }\n    if(res.data.data.width) {\n      const options = Object.keys(res.data.data.width).map( item => ({label:item, value:item}));\n      width.loadOptions(options)\n    }\n    \n  })\n}\n","onFocus":"","onBlur":"","onValidate":""},"id":"select63027"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"type","label":"search_documentType","labelZh":"文档类型","labelAlign":"","defaultValue":[],"placeholder":"dpTip_all","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":true,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"$api.post('/nuxeo/types', {}).then(res => {\n   res = res.data.data\n  const reponse = res.map(item => ({\n    value: item.name,\n    label: item.name\n  }))\n  reponse.sort((a, b) => a.label.localeCompare(b.label))\n  this.loadOptions(reponse)\n}).catch(err => {\n  console.log(err)\n})","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select105463"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"authors","label":"search_authors","labelZh":"作者","labelAlign":"label-left-align","defaultValue":[],"placeholder":"dpTip_all","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":true,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"$api.post('/nuxeo/identity/users', {}).then(res => {\n  res = res.data.data\n  const result = []\n  res.forEach(item => {\n    if(item.username || item.userId) {\n      result.push({\n        value: item.userId || item.username,\n        label: item.username\n      })\n    }\n  })\n  result.sort((a, b) => a.label.localeCompare(b.label))\n  this.loadOptions(result)\n}).catch(err => {\n})","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select59109"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"includeFolder","label":"search_includeFolder","labelZh":"","labelAlign":"","defaultValue":"1","placeholder":"","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":false,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[{"label":"Yes","value":"1"},{"label":"No","value":"0"}],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select104206"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"hight","label":"serch_hight","labelZh":"","labelAlign":"","defaultValue":"","placeholder":"","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"clearable":true,"filterable":false,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select93029"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"width","label":"search_width","labelZh":"","labelAlign":"","defaultValue":3,"placeholder":"","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"clearable":true,"filterable":false,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":"","labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select38484"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"mimeType","label":"search_mimeType","labelZh":"","labelAlign":"","defaultValue":"","placeholder":"","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"clearable":true,"filterable":false,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":"","labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select28003"},{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"duration","label":"search_duration","labelZh":"","labelAlign":"","defaultValue":"","placeholder":"","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"clearable":true,"filterable":false,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":"","labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select70361"}],"options":{"name":"gridCol64828","hidden":false,"span":24,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-64828"}],"options":{"name":"grid22081","hidden":false,"gutter":12,"colHeight":null,"customClass":""},"id":"grid22081"},{"type":"grid","category":"container","icon":"grid","cols":[{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"modified","label":"search_modificationDate","labelZh":"更新时间","labelAlign":"","defaultValue":"","placeholder":"dpTip_all","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[{"label":"Last 24h","value":"last24h"},{"label":"Last week","value":"lastWeek"},{"label":"Last month","value":"lastMonth"},{"value":"lastYear","label":"Last year"},{"value":"priorToLastYear","label":"More than 1 year ago"}],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select54847"}],"options":{"name":"gridCol56812","hidden":false,"span":12,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":""},"id":"grid-col-56812"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"size","label":"search_size","labelZh":"文件大小","labelAlign":"","defaultValue":"","placeholder":"dpTip_all","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[{"label":"Less than 100 KB","value":"100"},{"label":"Between 100 KB and 1 MB","value":"1000"},{"label":"Between 1 MB and 10 MB","value":"10000"},{"value":"100000","label":"Between 10 MB and 100 MB"},{"value":"1000000","label":"More than 100 MB"}],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":"","labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select80655"}],"options":{"name":"gridCol26217","hidden":false,"span":12,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":""},"id":"grid-col-26217"}],"options":{"name":"grid80491","hidden":false,"gutter":12,"colHeight":null,"customClass":""},"id":"grid80491"},{"type":"grid","category":"container","icon":"grid","cols":[{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"collections","label":"search_collections","labelZh":"search_collections","labelAlign":"","defaultValue":[],"placeholder":"","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":false,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":true,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"$api.get('/nuxeo/collection/all').then(res => {\n   res = res.data.data\n  const reponse = res.map(item => ({\n    value: item.id,\n    label: item.name\n  }))\n  reponse.sort((a, b) => a.label.localeCompare(b.label))\n  this.loadOptions(reponse)\n}).catch(err => {\n})","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select64376"}],"options":{"name":"gridCol89288","hidden":false,"span":12,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":""},"id":"grid-col-89288"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"tags","label":"search_tags","labelZh":"标签","labelAlign":"","defaultValue":[],"placeholder":"dpTip_all","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":true,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":"","labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"$api.post('/nuxeo/tags/getAllTags', {}).then(res => {\n   res = res.data.data\n  const reponse = res.map(item => ({\n    value: item,\n    label: item\n  }))\n  reponse.sort((a, b) => a.label.localeCompare(b.label))\n  this.loadOptions(reponse)\n}).catch(err => {\n})","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select55898"}],"options":{"name":"gridCol22399","hidden":false,"span":12,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":""},"id":"grid-col-22399"}],"options":{"name":"grid41444","hidden":false,"gutter":12,"colHeight":null,"customClass":""},"id":"grid41444"}],"formConfig":{"modelName":"formData","refName":"vForm","rulesName":"rules","labelWidth":80,"labelPosition":"top","size":"","labelAlign":"label-left-align","cssCode":"","customClass":"","functions":"","layoutType":"PC","jsonVersion":3,"onFormCreated":"","onFormMounted":"// get all dropdown\nconst response = $api.get('/nuxeo/search/getSearchExtends');\nresponse.then(res => console.log(res.data.data, 'getSearchExtends'))","onFormDataChange":"","onFormValidate":"","saveRemoteOptions":"never","labelFormUniqueName":true,"dataSources":[]}}