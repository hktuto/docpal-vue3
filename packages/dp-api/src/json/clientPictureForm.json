{
  "widgetList": [
    {
      "type": "grid",
      "category": "container",
      "icon": "grid",
      "cols": [
        {
          "type": "grid-col",
          "category": "container",
          "icon": "grid-col",
          "internal": true,
          "widgetList": [
            {
              "type": "checkbox",
              "icon": "checkbox-field",
              "formItemFlag": true,
              "options": {
                "name": "system_primaryType_agg",
                "label": "system_primaryType_agg",
                "labelZh": "",
                "labelAlign": "",
                "defaultValue": [],
                "columnWidth": "200px",
                "size": "",
                "displayStyle": "block",
                "buttonStyle": false,
                "border": false,
                "labelWidth": null,
                "labelHidden": false,
                "disabled": false,
                "hidden": false,
                "optionItems": [],
                "required": false,
                "requiredHint": "",
                "validation": "",
                "validationHint": "",
                "customClass": [],
                "labelIconClass": null,
                "labelIconPosition": "rear",
                "labelTooltip": null,
                "onCreated": "",
                "onMounted": "",
                "onChange": "",
                "onValidate": ""
              },
              "id": "checkbox102048"
            },
            {
              "type": "static-text",
              "icon": "static-text",
              "formItemFlag": false,
              "options": {
                "name": "no_system_primaryType_agg",
                "columnWidth": "200px",
                "hidden": true,
                "textContent": "noAvailableResults",
                "fontSize": "13px",
                "customClass": [],
                "onCreated": "",
                "onMounted": "",
                "label": "no_system_primaryType_agg"
              },
              "id": "statictext93593"
            }
          ],
          "options": {
            "name": "gridCol39617",
            "hidden": false,
            "span": 24,
            "offset": 0,
            "push": 0,
            "pull": 0,
            "responsive": false,
            "md": 12,
            "sm": 12,
            "xs": 12,
            "customClass": ""
          },
          "id": "grid-col-39617"
        },
        {
          "type": "grid-col",
          "category": "container",
          "icon": "grid-col",
          "internal": true,
          "widgetList": [
            {
              "type": "checkbox",
              "icon": "checkbox-field",
              "formItemFlag": true,
              "options": {
                "name": "system_mimetype_agg",
                "label": "system_mimetype_agg",
                "labelZh": "",
                "labelAlign": "",
                "defaultValue": [],
                "columnWidth": "200px",
                "size": "",
                "displayStyle": "block",
                "buttonStyle": false,
                "border": false,
                "labelWidth": null,
                "labelHidden": false,
                "disabled": false,
                "hidden": false,
                "optionItems": [],
                "required": false,
                "requiredHint": "",
                "validation": "",
                "validationHint": "",
                "customClass": [],
                "labelIconClass": null,
                "labelIconPosition": "rear",
                "labelTooltip": null,
                "onCreated": "",
                "onMounted": "",
                "onChange": "",
                "onValidate": ""
              },
              "id": "checkbox102049"
            },
            {
              "type": "static-text",
              "icon": "static-text",
              "formItemFlag": false,
              "options": {
                "name": "no_system_mimetype_agg",
                "columnWidth": "200px",
                "hidden": true,
                "textContent": "noAvailableResults",
                "fontSize": "13px",
                "customClass": "",
                "onCreated": "",
                "onMounted": "",
                "label": "no_system_mimetype_agg"
              },
              "id": "statictext32837"
            }
          ],
          "options": {
            "name": "gridCol84723",
            "hidden": false,
            "span": 24,
            "offset": 0,
            "push": 0,
            "pull": 0,
            "responsive": false,
            "md": 12,
            "sm": 12,
            "xs": 12,
            "customClass": ""
          },
          "id": "grid-col-84723"
        },
        {
          "type": "grid-col",
          "category": "container",
          "icon": "grid-col",
          "internal": true,
          "widgetList": [
            {
              "type": "checkbox",
              "icon": "checkbox-field",
              "formItemFlag": true,
              "options": {
                "name": "asset_width_agg",
                "label": "asset_width_agg",
                "labelZh": "",
                "labelAlign": "",
                "defaultValue": [],
                "columnWidth": "200px",
                "size": "",
                "displayStyle": "block",
                "buttonStyle": false,
                "border": false,
                "labelWidth": null,
                "labelHidden": false,
                "disabled": false,
                "hidden": false,
                "optionItems": [],
                "required": false,
                "requiredHint": "",
                "validation": "",
                "validationHint": "",
                "customClass": [],
                "labelIconClass": null,
                "labelIconPosition": "rear",
                "labelTooltip": null,
                "onCreated": "",
                "onMounted": "",
                "onChange": "",
                "onValidate": ""
              },
              "id": "checkbox33966"
            },
            {
              "type": "static-text",
              "icon": "static-text",
              "formItemFlag": false,
              "options": {
                "name": "no_asset_width_agg",
                "columnWidth": "200px",
                "hidden": true,
                "textContent": "noAvailableResults",
                "fontSize": "13px",
                "customClass": "",
                "onCreated": "",
                "onMounted": "",
                "label": "no_asset_width_agg"
              },
              "id": "statictext55999"
            }
          ],
          "options": {
            "name": "gridCol66588",
            "hidden": false,
            "span": 24,
            "offset": 0,
            "push": 0,
            "pull": 0,
            "responsive": false,
            "md": 12,
            "sm": 12,
            "xs": 12,
            "customClass": ""
          },
          "id": "grid-col-66588"
        },
        {
          "type": "grid-col",
          "category": "container",
          "icon": "grid-col",
          "internal": true,
          "widgetList": [
            {
              "type": "checkbox",
              "icon": "checkbox-field",
              "formItemFlag": true,
              "options": {
                "name": "asset_height_agg",
                "label": "asset_height_agg",
                "labelZh": "",
                "labelAlign": "",
                "defaultValue": [],
                "columnWidth": "200px",
                "size": "",
                "displayStyle": "block",
                "buttonStyle": false,
                "border": false,
                "labelWidth": null,
                "labelHidden": false,
                "disabled": false,
                "hidden": false,
                "optionItems": [],
                "required": false,
                "requiredHint": "",
                "validation": "",
                "validationHint": "",
                "customClass": [],
                "labelIconClass": null,
                "labelIconPosition": "rear",
                "labelTooltip": null,
                "onCreated": "",
                "onMounted": "",
                "onChange": "",
                "onValidate": ""
              },
              "id": "checkbox102045"
            },
            {
              "type": "static-text",
              "icon": "static-text",
              "formItemFlag": false,
              "options": {
                "name": "no_asset_height_agg",
                "columnWidth": "200px",
                "hidden": true,
                "textContent": "noAvailableResults",
                "fontSize": "13px",
                "customClass": "",
                "onCreated": "",
                "onMounted": "",
                "label": "no_asset_height_agg"
              },
              "id": "statictext105026"
            }
          ],
          "options": {
            "name": "gridCol86168",
            "hidden": false,
            "span": 24,
            "offset": 0,
            "push": 0,
            "pull": 0,
            "responsive": false,
            "md": 12,
            "sm": 12,
            "xs": 12,
            "customClass": ""
          },
          "id": "grid-col-86168"
        },
        {
          "type": "grid-col",
          "category": "container",
          "icon": "grid-col",
          "internal": true,
          "widgetList": [
            {
              "type": "checkbox",
              "icon": "checkbox-field",
              "formItemFlag": true,
              "options": {
                "name": "color_profile_agg",
                "label": "color_profile_agg",
                "labelZh": "",
                "labelAlign": "",
                "defaultValue": [],
                "columnWidth": "200px",
                "size": "",
                "displayStyle": "block",
                "buttonStyle": false,
                "border": false,
                "labelWidth": null,
                "labelHidden": false,
                "disabled": false,
                "hidden": false,
                "optionItems": [],
                "required": false,
                "requiredHint": "",
                "validation": "",
                "validationHint": "",
                "customClass": [],
                "labelIconClass": null,
                "labelIconPosition": "rear",
                "labelTooltip": null,
                "onCreated": "",
                "onMounted": "",
                "onChange": "",
                "onValidate": ""
              },
              "id": "checkbox102047"
            },
            {
              "type": "static-text",
              "icon": "static-text",
              "formItemFlag": false,
              "options": {
                "name": "no_color_profile_agg",
                "columnWidth": "200px",
                "hidden": true,
                "textContent": "noAvailableResults",
                "fontSize": "13px",
                "customClass": "",
                "onCreated": "",
                "onMounted": "",
                "label": "no_color_profile_agg"
              },
              "id": "statictext23169"
            }
          ],
          "options": {
            "name": "gridCol81202",
            "hidden": false,
            "span": 24,
            "offset": 0,
            "push": 0,
            "pull": 0,
            "responsive": false,
            "md": 12,
            "sm": 12,
            "xs": 12,
            "customClass": ""
          },
          "id": "grid-col-81202"
        },
        {
          "type": "grid-col",
          "category": "container",
          "icon": "grid-col",
          "internal": true,
          "widgetList": [
            {
              "type": "checkbox",
              "icon": "checkbox-field",
              "formItemFlag": true,
              "options": {
                "name": "color_depth_agg",
                "label": "color_depth_agg",
                "labelZh": "",
                "labelAlign": "",
                "defaultValue": [],
                "columnWidth": "200px",
                "size": "",
                "displayStyle": "block",
                "buttonStyle": false,
                "border": false,
                "labelWidth": null,
                "labelHidden": false,
                "disabled": false,
                "hidden": false,
                "optionItems": [],
                "required": false,
                "requiredHint": "",
                "validation": "",
                "validationHint": "",
                "customClass": [],
                "labelIconClass": null,
                "labelIconPosition": "rear",
                "labelTooltip": null,
                "onCreated": "",
                "onMounted": "",
                "onChange": "",
                "onValidate": ""
              },
              "id": "checkbox102046"
            },
            {
              "type": "static-text",
              "icon": "static-text",
              "formItemFlag": false,
              "options": {
                "name": "no_color_depth_agg",
                "columnWidth": "200px",
                "hidden": true,
                "textContent": "noAvailableResults",
                "fontSize": "13px",
                "customClass": "",
                "onCreated": "",
                "onMounted": "",
                "label": "no_color_depth_agg"
              },
              "id": "statictext26948"
            }
          ],
          "options": {
            "name": "gridCol93885",
            "hidden": false,
            "span": 24,
            "offset": 0,
            "push": 0,
            "pull": 0,
            "responsive": false,
            "md": 12,
            "sm": 12,
            "xs": 12,
            "customClass": ""
          },
          "id": "grid-col-93885"
        },
        {
          "type": "grid-col",
          "category": "container",
          "icon": "grid-col",
          "internal": true,
          "widgetList": [
            {
              "type": "checkbox",
              "icon": "checkbox-field",
              "formItemFlag": true,
              "options": {
                "name": "video_duration_agg",
                "label": "video_duration_agg",
                "labelZh": "",
                "labelAlign": "",
                "defaultValue": [],
                "columnWidth": "200px",
                "size": "",
                "displayStyle": "block",
                "buttonStyle": false,
                "border": false,
                "labelWidth": null,
                "labelHidden": false,
                "disabled": false,
                "hidden": false,
                "optionItems": [],
                "required": false,
                "requiredHint": "",
                "validation": "",
                "validationHint": "",
                "customClass": [],
                "labelIconClass": null,
                "labelIconPosition": "rear",
                "labelTooltip": null,
                "onCreated": "",
                "onMounted": "",
                "onChange": "",
                "onValidate": ""
              },
              "id": "checkbox1020455"
            },
            {
              "type": "static-text",
              "icon": "static-text",
              "formItemFlag": false,
              "options": {
                "name": "no_video_duration_agg",
                "columnWidth": "200px",
                "hidden": true,
                "textContent": "noAvailableResults",
                "fontSize": "13px",
                "customClass": "",
                "onCreated": "",
                "onMounted": "",
                "label": "no_video_duration_agg"
              },
              "id": "statictext33472"
            }
          ],
          "options": {
            "name": "gridCol29889",
            "hidden": false,
            "span": 24,
            "offset": 0,
            "push": 0,
            "pull": 0,
            "responsive": false,
            "md": 12,
            "sm": 12,
            "xs": 12,
            "customClass": ""
          },
          "id": "grid-col-29889"
        }
      ],
      "options": {
        "name": "grid75719",
        "hidden": false,
        "gutter": 12,
        "colHeight": null,
        "customClass": []
      },
      "id": "grid75719"
    }
  ],
  "formConfig": {
    "modelName": "formData",
    "refName": "vForm",
    "rulesName": "rules",
    "labelWidth": 80,
    "labelPosition": "top",
    "size": "",
    "labelAlign": "label-left-align",
    "saveRemoteOptions": "never",
    "labelFormUniqueName": true,
    "cssCode": ".picture-search--container {}\n\n.picture-search--container .el-form-item {\n  margin-bottom: unset;\n  margin-top: 10px;\n}",
    "customClass": [
      "picture-search--container"
    ],
    "functions": "let vform\nfunction initVform (ref) {\n  vform = ref\n}\nfunction getData () {\n  Object.keys(aggregations).forEach((key) => {\n    const aggregationItem = aggregations[key]\n    const widgetRef = vform.getWidgetRef(key)\n    if(!!widgetRef) {\n      const options = []\n      aggregationItem.ranges.forEach((rangeItem, rangeIndex) => {\n        options.push({\n          value: rangeItem.key,\n          label: `${fieldI18n(rangeItem.key, key)}(${aggregationItem.buckets[rangeIndex].docCount})`\n        })\n      })\n      \n      const noWidgetRef = vform.getWidgetRef(`no_${key}`)\n      if (!noWidgetRef) return\n      if (options.length > 0) {\n        noWidgetRef.setHidden(true)\n        widgetRef.loadOptions(options)\n      } else {\n        noWidgetRef.setHidden(false)\n      }\n    }\n  })\n}\nfunction $t (value) {\n  return vform.$i18n.t(value)\n}\nfunction fieldI18n (field, typeId) {\n  let result = field\n  if(['asset_height_agg', 'asset_width_agg', 'video_duration_agg'].includes(typeId)) {\n    const fields = field.split('_')\n    const unit = fields.pop()\n    console.log(fields, unit)\n    console.log(this)\n    console.log(vform.$i18n.t)\n    console.log($t('lessThan'))\n    if(fields.length === 2) {\n      if(fields[0] === 'to') result = $t('tableHeader_lessThan') + ' '  + fields[1] + $t(unit)\n      else result = $t('tableHeader_moreThan') + ' '  + fields[1] + $t(unit)\n    } else {\n      result = $t('tableHeader_from') + ' ' + fields[1] + ' ' + $t('tableHeader_to') + ' '  + fields[3] + $t(unit)\n    }\n  }\n  console.log(result)\n  return result\n}\nconst aggregations = {\n  \"asset_width_agg\": {\n    \"entity-type\": \"aggregate\",\n    \"id\": \"asset_width_agg\",\n    \"field\": \"picture:info.width\",\n    \"properties\": {},\n    \"ranges\": [\n      {\n        \"key\": \"to_500_px\",\n        \"from\": null,\n        \"to\": 500\n      },\n      {\n        \"key\": \"from_500_to_1500_px\",\n        \"from\": 500,\n        \"to\": 1500\n      },\n      {\n        \"key\": \"from_1500_to_2000_px\",\n        \"from\": 1500,\n        \"to\": 2000\n      },\n      {\n        \"key\": \"from_2000_px\",\n        \"from\": 2000,\n        \"to\": null\n      }\n    ],\n    \"selection\": [\n      \"to_500_px\"\n    ],\n    \"type\": \"range\",\n    \"buckets\": [\n      {\n        \"key\": \"to_500_px\",\n        \"docCount\": 0,\n        \"from\": \"-Infinity\",\n        \"to\": 500\n      },\n      {\n        \"key\": \"from_500_to_1500_px\",\n        \"docCount\": 0,\n        \"from\": 500,\n        \"to\": 1500\n      },\n      {\n        \"key\": \"from_1500_to_2000_px\",\n        \"docCount\": 0,\n        \"from\": 1500,\n        \"to\": 2000\n      },\n      {\n        \"key\": \"from_2000_px\",\n        \"docCount\": 0,\n        \"from\": 2000,\n        \"to\": \"Infinity\"\n      }\n    ],\n    \"extendedBuckets\": [\n      {\n        \"key\": \"to_500_px\",\n        \"docCount\": 0,\n        \"from\": \"-Infinity\",\n        \"to\": 500\n      },\n      {\n        \"key\": \"from_500_to_1500_px\",\n        \"docCount\": 0,\n        \"from\": 500,\n        \"to\": 1500\n      },\n      {\n        \"key\": \"from_1500_to_2000_px\",\n        \"docCount\": 0,\n        \"from\": 1500,\n        \"to\": 2000\n      },\n      {\n        \"key\": \"from_2000_px\",\n        \"docCount\": 0,\n        \"from\": 2000,\n        \"to\": \"Infinity\"\n      }\n    ]\n  },\n  \"color_profile_agg\": {\n    \"entity-type\": \"aggregate\",\n    \"id\": \"color_profile_agg\",\n    \"field\": \"picture:info.colorSpace\",\n    \"properties\": {},\n    \"ranges\": [],\n    \"selection\": [\n      \"sRGB\"\n    ],\n    \"type\": \"terms\",\n    \"buckets\": [],\n    \"extendedBuckets\": [\n      {\n        \"key\": \"sRGB\",\n        \"fetchedKey\": \"sRGB\",\n        \"docCount\": 0\n      }\n    ]\n  },\n  \"color_depth_agg\": {\n    \"entity-type\": \"aggregate\",\n    \"id\": \"color_depth_agg\",\n    \"field\": \"picture:info.depth\",\n    \"properties\": {},\n    \"ranges\": [],\n    \"selection\": [\n      \"8\"\n    ],\n    \"type\": \"terms\",\n    \"buckets\": [],\n    \"extendedBuckets\": [\n      {\n        \"key\": \"8\",\n        \"fetchedKey\": 8,\n        \"docCount\": 0\n      }\n    ]\n  },\n  \"asset_height_agg\": {\n    \"entity-type\": \"aggregate\",\n    \"id\": \"asset_height_agg\",\n    \"field\": \"picture:info.height\",\n    \"properties\": {},\n    \"ranges\": [\n      {\n        \"key\": \"to_500_px\",\n        \"from\": null,\n        \"to\": 500\n      },\n      {\n        \"key\": \"from_500_to_1500_px\",\n        \"from\": 500,\n        \"to\": 1500\n      },\n      {\n        \"key\": \"from_1500_to_2000_px\",\n        \"from\": 1500,\n        \"to\": 2000\n      },\n      {\n        \"key\": \"from_2000_px\",\n        \"from\": 2000,\n        \"to\": null\n      }\n    ],\n    \"selection\": [\n      \"to_500_px\"\n    ],\n    \"type\": \"range\",\n    \"buckets\": [\n      {\n        \"key\": \"to_500_px\",\n        \"docCount\": 0,\n        \"from\": \"-Infinity\",\n        \"to\": 500\n      },\n      {\n        \"key\": \"from_500_to_1500_px\",\n        \"docCount\": 0,\n        \"from\": 500,\n        \"to\": 1500\n      },\n      {\n        \"key\": \"from_1500_to_2000_px\",\n        \"docCount\": 0,\n        \"from\": 1500,\n        \"to\": 2000\n      },\n      {\n        \"key\": \"from_2000_px\",\n        \"docCount\": 0,\n        \"from\": 2000,\n        \"to\": \"Infinity\"\n      }\n    ],\n    \"extendedBuckets\": [\n      {\n        \"key\": \"to_500_px\",\n        \"docCount\": 0,\n        \"from\": \"-Infinity\",\n        \"to\": 500\n      },\n      {\n        \"key\": \"from_500_to_1500_px\",\n        \"docCount\": 0,\n        \"from\": 500,\n        \"to\": 1500\n      },\n      {\n        \"key\": \"from_1500_to_2000_px\",\n        \"docCount\": 0,\n        \"from\": 1500,\n        \"to\": 2000\n      },\n      {\n        \"key\": \"from_2000_px\",\n        \"docCount\": 0,\n        \"from\": 2000,\n        \"to\": \"Infinity\"\n      }\n    ]\n  },\n  \"video_duration_agg\": {\n    \"entity-type\": \"aggregate\",\n    \"id\": \"video_duration_agg\",\n    \"field\": \"vid:info.duration\",\n    \"properties\": {},\n    \"ranges\": [\n      {\n        \"key\": \"to_30_s\",\n        \"from\": null,\n        \"to\": 30\n      },\n      {\n        \"key\": \"from_30_to_180_s\",\n        \"from\": 30,\n        \"to\": 180\n      },\n      {\n        \"key\": \"from_180_to_600_s\",\n        \"from\": 180,\n        \"to\": 600\n      },\n      {\n        \"key\": \"from_600_to_1800_s\",\n        \"from\": 600,\n        \"to\": 1800\n      },\n      {\n        \"key\": \"from_1800_s\",\n        \"from\": 1800,\n        \"to\": null\n      }\n    ],\n    \"selection\": [\n      \"to_30_s\",\n      \"from_30_to_180_s\"\n    ],\n    \"type\": \"range\",\n    \"buckets\": [\n      {\n        \"key\": \"to_30_s\",\n        \"docCount\": 0,\n        \"from\": \"-Infinity\",\n        \"to\": 30\n      },\n      {\n        \"key\": \"from_30_to_180_s\",\n        \"docCount\": 0,\n        \"from\": 30,\n        \"to\": 180\n      },\n      {\n        \"key\": \"from_180_to_600_s\",\n        \"docCount\": 0,\n        \"from\": 180,\n        \"to\": 600\n      },\n      {\n        \"key\": \"from_600_to_1800_s\",\n        \"docCount\": 0,\n        \"from\": 600,\n        \"to\": 1800\n      },\n      {\n        \"key\": \"from_1800_s\",\n        \"docCount\": 0,\n        \"from\": 1800,\n        \"to\": \"Infinity\"\n      }\n    ],\n    \"extendedBuckets\": [\n      {\n        \"key\": \"to_30_s\",\n        \"docCount\": 0,\n        \"from\": \"-Infinity\",\n        \"to\": 30\n      },\n      {\n        \"key\": \"from_30_to_180_s\",\n        \"docCount\": 0,\n        \"from\": 30,\n        \"to\": 180\n      },\n      {\n        \"key\": \"from_180_to_600_s\",\n        \"docCount\": 0,\n        \"from\": 180,\n        \"to\": 600\n      },\n      {\n        \"key\": \"from_600_to_1800_s\",\n        \"docCount\": 0,\n        \"from\": 600,\n        \"to\": 1800\n      },\n      {\n        \"key\": \"from_1800_s\",\n        \"docCount\": 0,\n        \"from\": 1800,\n        \"to\": \"Infinity\"\n      }\n    ]\n  },\n  \"system_primaryType_agg\": {\n    \"entity-type\": \"aggregate\",\n    \"id\": \"system_primaryType_agg\",\n    \"field\": \"ecm:primaryType\",\n    \"properties\": {},\n    \"ranges\": [],\n    \"selection\": [\n      \"Picture\"\n    ],\n    \"type\": \"terms\",\n    \"buckets\": [],\n    \"extendedBuckets\": [\n      {\n        \"key\": \"Picture\",\n        \"fetchedKey\": \"Picture\",\n        \"docCount\": 0\n      }\n    ]\n  },\n  \"system_mimetype_agg\": {\n    \"entity-type\": \"aggregate\",\n    \"id\": \"system_mimetype_agg\",\n    \"field\": \"file:content.mime-type\",\n    \"properties\": {},\n    \"ranges\": [],\n    \"selection\": [\n      \"image/png\"\n    ],\n    \"type\": \"terms\",\n    \"buckets\": [],\n    \"extendedBuckets\": [\n      {\n        \"key\": \"image/png\",\n        \"fetchedKey\": \"image/png\",\n        \"docCount\": 0\n      }\n    ]\n  }\n}",
    "layoutType": "PC",
    "onFormCreated": "initVform(this)\n",
    "onFormMounted": "getData()",
    "onFormDataChange": ""
  }
}
