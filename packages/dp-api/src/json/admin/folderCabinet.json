{"widgetList":[{"key":73467,"type":"grid","category":"container","icon":"grid","cols":[{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":80927,"type":"input","icon":"text-field","formItemFlag":true,"options":{"name":"label","label":"label","labelAlign":"","type":"text","defaultValue":"","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"readonly":false,"disabled":false,"hidden":false,"clearable":true,"showPassword":false,"required":true,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"minLength":null,"maxLength":null,"showWordLimit":false,"prefixIcon":"","suffixIcon":"","appendButton":false,"appendButtonDisabled":false,"buttonIcon":"custom-search","onCreated":"","onMounted":"","onInput":"","onChange":"","onFocus":"","onBlur":"","onValidate":"","onAppendButtonClick":""},"id":"input53675"}],"options":{"name":"gridCol79996","hidden":false,"span":10,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-79996"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":83439,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"documentType","label":"docType_documentType","labelAlign":"","defaultValue":"","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":true,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"$api.post('/nuxeo/types', {}).then(res => {\n   res = res.data.data\n  const reponse = res.reduce((prev,item) => {\n    if(item.isFolder) {\n      prev.push({\n        value: item.name,\n        label: item.name\n      })\n    }\n    return prev\n  }, [])\n  this.loadOptions(reponse)\n}).catch(err => {\n})","onRemoteQuery":"","onChange":"const isEditRef = this.getWidgetRef('isEdit')\nconst editReady = !isEditRef.getValue() || this.globalOptionData?.editReady\nconst metadataRef = this.getWidgetRef('metadata')\n\n$api.get('/docpal/workflow/queryMetaValidationRule', { params: {documentType: value }}).then(res => {\n   res = res.data.data\n  const reponse = res.reduce((prev,item) => {\n    prev.push({\n      value: item.dataType + '&&' + item.metaData,\n      label: item.metaData\n    })\n    return prev\n  }, [])\n  metadataRef.loadOptions(reponse)\n  if(editReady) metadataRef.setValue([])\n}).catch(err => {\n})","onFocus":"","onBlur":"","onValidate":""},"id":"select68154"}],"options":{"name":"gridCol60914","hidden":false,"span":10,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":""},"id":"grid-col-60914"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":24008,"type":"switch","icon":"switch-field","formItemFlag":true,"options":{"name":"allow","label":"allow","labelAlign":"","defaultValue":true,"columnWidth":"200px","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"switchWidth":40,"activeText":"","inactiveText":"","activeColor":null,"inactiveColor":null,"onCreated":"","onMounted":"","onChange":"","onValidate":""},"id":"switch107433"}],"options":{"name":"gridCol40669","hidden":false,"span":4,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-40669"}],"options":{"name":"grid42547","hidden":false,"gutter":12,"colHeight":null,"customClass":[]},"id":"grid42547"},{"key":107020,"type":"grid","category":"container","icon":"grid","cols":[{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":94515,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"metadata","label":"filterMetadata","labelAlign":"","defaultValue":[],"placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":true,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select51159"}],"options":{"name":"gridCol32137","hidden":false,"span":24,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":""},"id":"grid-col-32137"}],"options":{"name":"grid29888","hidden":false,"gutter":12,"colHeight":null,"customClass":[]},"id":"grid29888"},{"key":73467,"type":"grid","category":"container","icon":"grid","cols":[{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":13307,"type":"input","icon":"text-field","formItemFlag":true,"options":{"name":"notificationReminder","label":"notificationReminder","labelAlign":"","type":"text","defaultValue":"","placeholder":"days","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"readonly":false,"disabled":false,"hidden":false,"clearable":true,"showPassword":false,"required":true,"requiredHint":"","validation":"number","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"minLength":null,"maxLength":null,"showWordLimit":false,"prefixIcon":"","suffixIcon":"","appendButton":false,"appendButtonDisabled":false,"buttonIcon":"custom-search","onCreated":"","onMounted":"","onInput":"","onChange":"","onFocus":"","onBlur":"","onValidate":"","onAppendButtonClick":""},"id":"input72328"}],"options":{"name":"gridCol13734","hidden":false,"span":8,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-13734"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":13307,"type":"input","icon":"text-field","formItemFlag":true,"options":{"name":"reportDay","label":"reportDay","labelAlign":"","type":"text","defaultValue":"","placeholder":"days","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"readonly":false,"disabled":false,"hidden":false,"clearable":true,"showPassword":false,"required":true,"requiredHint":"","validation":"number","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"minLength":null,"maxLength":null,"showWordLimit":false,"prefixIcon":"","suffixIcon":"","appendButton":false,"appendButtonDisabled":false,"buttonIcon":"custom-search","onCreated":"","onMounted":"","onInput":"","onChange":"","onFocus":"","onBlur":"","onValidate":"","onAppendButtonClick":""},"id":"input48632"}],"options":{"name":"gridCol55027","hidden":false,"span":8,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-55027"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":13307,"type":"input","icon":"text-field","formItemFlag":true,"options":{"name":"emailReminder","label":"emailReminder","labelAlign":"","type":"text","defaultValue":"","placeholder":"days","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"readonly":false,"disabled":false,"hidden":false,"clearable":true,"showPassword":false,"required":true,"requiredHint":"","validation":"number","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"minLength":null,"maxLength":null,"showWordLimit":false,"prefixIcon":"","suffixIcon":"","appendButton":false,"appendButtonDisabled":false,"buttonIcon":"custom-search","onCreated":"","onMounted":"","onInput":"","onChange":"","onFocus":"","onBlur":"","onValidate":"","onAppendButtonClick":""},"id":"input41223"}],"options":{"name":"gridCol89522","hidden":false,"span":8,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-89522"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":46829,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"tos","label":"tos","labelAlign":"","defaultValue":[],"placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":true,"remote":false,"automaticDropdown":false,"multiple":true,"multipleLimit":0,"optionItems":[],"required":true,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"const _this = this\n$api.post('/nuxeo/identity/users', {}).then(res => {\n  res = res.data.data\n  const result = []\n  res.forEach(item => {\n    if(item.username || item.userId) {\n      result.push({\n        value: item.userId || item.username,\n        label: item.username\n      })\n    }\n  })\n  result.sort((a, b) => a.label.localeCompare(b.label))\n  result.unshift({\n     value: 'createBy',\n     label: $t('role.creator')\n  })\n  _this.loadOptions(result)\n}).catch(err => {\n})","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select11189"}],"options":{"name":"gridCol28590","hidden":false,"span":12,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":""},"id":"grid-col-28590"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":46829,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"ccs","label":"ccs","labelAlign":"","defaultValue":[],"placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":true,"remote":false,"automaticDropdown":false,"multiple":true,"multipleLimit":0,"optionItems":[],"required":true,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"const _this = this\n$api.post('/nuxeo/identity/users', {}).then(res => {\n  res = res.data.data\n  const result = []\n  res.forEach(item => {\n    if(item.username || item.userId) {\n      result.push({\n        value: item.userId || item.username,\n        label: item.username\n      })\n    }\n  })\n  result.sort((a, b) => a.label.localeCompare(b.label))\n  _this.loadOptions(result)\n}).catch(err => {\n})","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select118471"}],"options":{"name":"gridCol108746","hidden":false,"span":12,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":""},"id":"grid-col-108746"}],"options":{"name":"grid70386","hidden":false,"gutter":12,"colHeight":null,"customClass":[]},"id":"grid70386"},{"key":107020,"type":"grid","category":"container","icon":"grid","cols":[{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":109482,"type":"cascader","icon":"cascader-field","formItemFlag":true,"options":{"name":"rootId","label":"rootId","labelAlign":"","defaultValue":"","placeholder":"","size":"","lazy":true,"labelWidth":null,"labelHidden":false,"columnWidth":"200px","disabled":false,"hidden":false,"clearable":true,"filterable":false,"multiple":false,"checkStrictly":true,"showAllLevels":true,"optionItems":[],"required":true,"requiredHint":"","customRule":"","customRuleHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onChange":"","onFocus":"","onBlur":"","onValidate":"","onLazyLoad":"const { level, value, childrenData } = node\nif(!!childrenData) {\n  resolve(childrenData)\n  return\n}\nconst idOrPath = level == 0 ? \"/\" : value\n$api.post('/nuxeo/document/children/thumbnail', {idOrPath, pageSize: 200}).then(res => {\n  const nodes = res.data.data.entryList.reduce((prev, item) => { \n    if(item.isFolder) prev.push({\n      value: item.id,\n      label: item.name\n    })\n    return prev\n  },[])\n  // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n  resolve(nodes)\n}).catch(err => {\n  resolve([])\n})"},"id":"cascader76990"},{"key":44948,"type":"select-group","icon":"select-group-field","formItemFlag":true,"options":{"name":"binds","label":"rightDetail_userGroup","labelAlign":"","defaultValue":[],"placeholder":"","prefixIcon":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":true,"multipleLimit":0,"optionItems":[{"label":"Groups","options":[]},{"label":"Users","options":[]}],"required":true,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"init()\nconst _this = this\nasync function init () {\n  const groupList = await getGroupList()\n  const userList = await getUserList()\n  const list = [\n    { label: $i18n.t('user_groups'), options: groupList },\n    { label: $i18n.t('user_users'), options: userList }\n  ]\n  _this.loadOptions(list)\n  // \n}\nasync function getGroupList () {\n  try {\n    const data = await $api.post('/nuxeo/identity/groups', {}).then(res => res.data.data)\n    const result = data.reduce((prev,item) => {\n      prev.push({\n        value: `group:${item.id}`,\n        label: item.name\n      })\n      return prev\n    }, [])\n    return result.sort((a,b)=> (a.label.localeCompare(b.label) ))\n  } catch (e) {\n    return[]\n  }\n}\nasync function getUserList () {\n  try {\n    const data = await $api.post('/nuxeo/identity/users', {}).then(res => res.data.data)\n    const result =  data.reduce((prev,item) => {\n      if(item.username && item.userId) {\n        prev.push({\n          value: `user:${item.userId}`,\n          label: item.username\n        })\n      }\n      return prev\n    }, [])\n    return result.sort((a,b)=> (a.label.localeCompare(b.label) ))\n  } catch (e) {\n    return[]\n  }\n}\n","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"selectgroup78415"}],"options":{"name":"gridCol105170","hidden":false,"span":24,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":""},"id":"grid-col-105170"}],"options":{"name":"grid72041","hidden":false,"gutter":12,"colHeight":null,"customClass":[]},"id":"grid72041"},{"key":39017,"type":"switch","icon":"switch-field","formItemFlag":true,"options":{"name":"isEdit","label":"isEdit","labelAlign":"","defaultValue":false,"columnWidth":"200px","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"switchWidth":40,"activeText":"","inactiveText":"","activeColor":null,"inactiveColor":null,"onCreated":"","onMounted":"","onChange":"const _this = this\nconst hideList = []\nconst disabledList = ['rootId']\nif(value) {\n  handleSet(disabledList, true, 'setDisabled')\n  setTimeout(function() {\n    _this.globalOptionData.editReady = true\n  }, 1000);\n} else {\n  handleSet(disabledList, false, 'setDisabled')\n}\n\nfunction handleSet(list, isHidden, fieldFun = 'setHidden') {\n  list.forEach(id => {\n    const idRef = _this.getWidgetRef(id)\n    if(!!idRef) idRef[fieldFun](isHidden)\n  })\n}","onValidate":""},"id":"switch37145"}],"formConfig":{"modelName":"formData","refName":"vForm","rulesName":"rules","labelWidth":80,"labelPosition":"top","size":"","labelAlign":"label-left-align","cssCode":"","customClass":[],"functions":"","layoutType":"PC","jsonVersion":3,"onFormCreated":"","onFormMounted":"","onFormDataChange":"","onFormValidate":"","saveRemoteOptions":"never","labelFormUniqueName":true,"dataSources":[]}}