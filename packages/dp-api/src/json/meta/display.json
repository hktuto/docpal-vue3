{"widgetList":[{"key":31780,"type":"grid","category":"container","icon":"grid","cols":[{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":72737,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"metaData","label":"rightDetail_meta","labelAlign":"","defaultValue":"","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":true,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"const vform = this.getFormRef()\nvform.$emit('emit', 'metaChange', value)","onFocus":"","onBlur":"","onValidate":""},"id":"select48218"},{"key":62665,"type":"divider","icon":"divider","formItemFlag":false,"options":{"name":"labelDisplayText","label":"","columnWidth":"200px","direction":"horizontal","contentPosition":"left","hidden":false,"customClass":[],"onCreated":"","onMounted":""},"id":"divider89614"},{"key":66848,"type":"slot","icon":"slot-field","formItemFlag":false,"options":{"name":"languageForm","label":"languageForm","hidden":false},"id":"slot30616"}],"options":{"name":"gridCol75142","hidden":false,"span":24,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":""},"id":"grid-col-75142"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":79696,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"dataType","label":"metadata.dataType","labelAlign":"","defaultValue":"","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"clearable":true,"filterable":true,"allowCreate":true,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[{"label":"meta.dataType.input","value":"input"},{"label":"meta.dataType.textarea","value":"textarea"},{"label":"meta.dataType.date","value":"date"},{"label":"meta.dataType.select","value":"select"}],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"const options = [\n  { label: $t('meta.dataType.input'), value: 'input' },\n  { label: $t('meta.dataType.textarea'), value: 'textarea'},\n  { label: $t('meta.dataType.date'), value: 'date'},\n  { label: $t('meta.dataType.select'), value: 'select'},\n]\nthis.loadOptions(options)","onMounted":"","onRemoteQuery":"","onChange":"const _this = this\nconst showList = {\n  input: [\n    { key: 'length', isRequired: false },\n    { key: 'regex', isRequired: false }\n  ],\n  textarea: [\n    { key: 'length', isRequired: false },\n    { key: 'regex', isRequired: false },\n  ],\n  date: [\n    { key: 'formatDate', isRequired: true }\n  ],\n  select: [\n    { key: 'dropdownType', isRequired: true },\n  ]\n}\nfunction handleShow() {\n  let showKeys = []\n  Object.keys(showList).forEach(sKey => {\n    showList[sKey].forEach(item => {\n      if(!showKeys.includes(item.key)) setShow(item.key, sKey !== value, item.isRequired)\n      if(sKey === value) {\n        showKeys.push(item.key)\n      }\n    })\n  })\n}\nfunction setShow(key, isHidden, isRequired) {\n  const keyRef = _this.getWidgetRef(key)\n  if(!keyRef) return\n  isRequired = isHidden ? false : isRequired\n  keyRef.setHidden(isHidden)\n  keyRef.setRequired(isRequired)\n}\n\nhandleShow()\n\nif(this.getWidgetRef('ready').getValue()) {\n  const dropdownTypeRef = this.getWidgetRef('dropdownType')\n  dropdownTypeRef.setValue('')\n}","onFocus":"","onBlur":"","onValidate":""},"id":"select78399"}],"options":{"name":"gridCol21438","hidden":false,"span":12,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-21438"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":72439,"type":"switch","icon":"switch-field","formItemFlag":true,"options":{"name":"display","label":"form_display","labelAlign":"","defaultValue":true,"columnWidth":"200px","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"switchWidth":40,"activeText":"","inactiveText":"","activeColor":null,"inactiveColor":null,"onCreated":"","onMounted":"","onChange":"","onValidate":""},"id":"switch64973"}],"options":{"name":"gridCol107814","hidden":false,"span":4,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-107814"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":72439,"type":"switch","icon":"switch-field","formItemFlag":true,"options":{"name":"isRequire","label":"form_isRequire","labelAlign":"","defaultValue":false,"columnWidth":"200px","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":false,"customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"switchWidth":40,"activeText":"","inactiveText":"","activeColor":null,"inactiveColor":null,"onCreated":"","onMounted":"","onChange":"","onValidate":""},"id":"switch58196"}],"options":{"name":"gridCol89405","hidden":false,"span":4,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-89405"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":102217,"type":"divider","icon":"divider","formItemFlag":false,"options":{"name":"divider24397","label":"","columnWidth":"200px","direction":"horizontal","contentPosition":"left","hidden":false,"customClass":[],"onCreated":"","onMounted":""},"id":"divider24397"}],"options":{"name":"gridCol23406","hidden":false,"span":24,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-23406"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":89970,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"dropdownType","label":"meta.dropdownType","labelAlign":"","defaultValue":"","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[{"value":"vocabulary","label":"meta.dropdownType.vocabulary"},{"value":"masterTable","label":"meta.dropdownType.masterTable"},{"value":"documentType","label":"meta.dropdownType.documentType"}],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"const options = [\n    { value: 'vocabulary', label: $t('meta.dropdownType.vocabulary') },\n    { value:'masterTable', label: $t('meta.dropdownType.masterTable') },\n    { value: 'documentType', label: $t('meta.dropdownType.documentType') },\n]\nthis.loadOptions(options)","onMounted":"","onRemoteQuery":"","onChange":"const _this = this\nconst showList = {\n  vocabulary: [\n    { key: 'vocabulary', isRequired: true },\n  ],\n  masterTable: [\n    { key:'masterTable', isRequired: true },\n    { key:'masterTableColumn', isRequired: true },\n  ],\n  documentType: [\n    { key: 'documentType', isRequired: true },\n    { key: 'displayField', isRequired: true },\n    { key: 'isMultiple', isRequired: false }\n  ]\n}\nfunction handleShow() {\n  let showKeys = []\n  Object.keys(showList).forEach(sKey => {\n    showList[sKey].forEach(item => {\n      if(!showKeys.includes(item.key)) setShow(item.key, sKey !== value, item.isRequired)\n      if(sKey === value) {\n        showKeys.push(item.key)\n      }\n    })\n  })\n}\nfunction setShow(key, isHidden, isRequired) {\n  const keyRef = _this.getWidgetRef(key)\n  if(!keyRef) return\n  isRequired = isHidden ? false : isRequired\n  keyRef.setHidden(isHidden)\n  keyRef.setRequired(isRequired)\n}\n\nhandleShow()","onFocus":"","onBlur":"","onValidate":""},"id":"select46626"},{"key":38951,"type":"input","icon":"text-field","formItemFlag":true,"options":{"name":"length","label":"form_length","labelAlign":"","type":"text","defaultValue":"","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"readonly":false,"disabled":false,"hidden":true,"clearable":true,"showPassword":false,"required":false,"requiredHint":"","validation":"number","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"minLength":null,"maxLength":null,"showWordLimit":false,"prefixIcon":"","suffixIcon":"","appendButton":false,"appendButtonDisabled":false,"buttonIcon":"custom-search","onCreated":"","onMounted":"","onInput":"","onChange":"","onFocus":"","onBlur":"","onValidate":"","onAppendButtonClick":""},"id":"input30843"},{"key":31374,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"formatDate","label":"formatDate","labelAlign":"","defaultValue":"","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[{"value":"YYYY-MM-DD","label":"YYYY-MM-DD"},{"value":"YYYY/MM/DD","label":"YYYY/MM/DD"},{"value":"YYYY年MM月DD日","label":"YYYY年MM月DD日"},{"value":"YYYY-MM-DD HH:mm:ss","label":"YYYY-MM-DD HH:mm:ss"},{"value":"YYYY-MM-DD hh:mm:ss","label":"YYYY-MM-DD hh:mm:ss"}],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select29230"},{"key":41411,"type":"switch","icon":"switch-field","formItemFlag":true,"options":{"name":"isMultiple","label":"meta.dropdownMutiple","labelAlign":"","defaultValue":false,"columnWidth":"200px","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"switchWidth":40,"activeText":"","inactiveText":"","activeColor":null,"inactiveColor":null,"onCreated":"","onMounted":"","onChange":"","onValidate":""},"id":"switch49531"}],"options":{"name":"gridCol74580","hidden":false,"span":8,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-74580"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":72737,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"vocabulary","label":"form_vocabulary","labelAlign":"","defaultValue":"","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"const _this = this\n$api.get('/nuxeo/vocabulary/listVocabularyIds').then(res => {\n  const reponse = res.data.data.reduce((prev, item) => {\n    prev.push({\n      label: item,\n      value: item\n    })\n    return prev\n  }, [])\n  _this.loadOptions(reponse)\n}).catch(err => {\n})","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select66534"},{"key":72204,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"masterTable","label":"meta.masterTable","labelAlign":"","defaultValue":"","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"const _this = this\ngetMasterTable()\nasync function getMasterTable() {\n  const data = await $api.post('/docpal/master/tables/page', {\n    pageSize: 10000,\n    pageNum: 0\n  }).then(res => res = res.data.data.entryList)\n  const reponse = data.map(item => ({\n    value: item.id,\n    label: item.name\n  }))\n  _this.loadOptions(reponse)\n}","onRemoteQuery":"","onChange":"const masterTableColumn = this.getWidgetRef('masterTableColumn')\nif(this.getWidgetRef('ready').getValue()) {\n  masterTableColumn.setValue('')\n}\nif(!value) return\n\nconst _this = this\ngetMasterTableDetail()\nasync function getMasterTableDetail() {\n  const data = await $api.get(`/docpal/master/tables/${value}`).then(res => res = res.data.data.fields)\n  const reponse = data.map(item => ({\n    value: item.columnName,\n    label: item.columnName\n  }))\n  masterTableColumn.loadOptions(reponse)\n}","onFocus":"","onBlur":"","onValidate":""},"id":"select15866"},{"key":98043,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"documentType","label":"search_documentType","labelAlign":"","defaultValue":"","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"$api.post('/nuxeo/types', {}).then(res => {\n   res = res.data.data\n  const reponse = res.map(item => ({\n    value: item.name,\n    label: item.name,\n    keywords: item.keywords.map(kItem => ({ value: kItem.name, label: kItem.name }))\n  }))\n  reponse.sort((a, b) => a.label.localeCompare(b.label))\n  this.loadOptions(reponse)\n}).catch(err => {\n})","onRemoteQuery":"","onChange":"const displayField = this.getWidgetRef('displayField')\nif(this.getWidgetRef('ready').getValue()) {\n  displayField.setValue('')\n}\nif(!value) return\n\nconst options = this.getOptionItems()\nconst interval = setInterval(() => {\n  const selected = options.find(item => item.value === value)\n  if(selected && selected.keywords) {\n    displayField.loadOptions(selected.keywords)\n    clearInterval(interval)\n  }\n}, 1000)","onFocus":"","onBlur":"","onValidate":""},"id":"select55980"},{"key":62012,"type":"input","icon":"text-field","formItemFlag":true,"options":{"name":"regex","label":"meta.regex","labelAlign":"","type":"text","defaultValue":"","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"readonly":false,"disabled":false,"hidden":true,"clearable":true,"showPassword":false,"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"minLength":null,"maxLength":null,"showWordLimit":false,"prefixIcon":"","suffixIcon":"","appendButton":true,"appendButtonText":"/","appendButtonDisabled":false,"buttonIcon":"","onCreated":"","onMounted":"","onInput":"","onChange":"","onFocus":"","onBlur":"","onEnter":"","onValidate":"","onAppendButtonClick":"","prependText":"/"},"id":"input82710"}],"options":{"name":"gridCol46848","hidden":false,"span":8,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-46848"},{"type":"grid-col","category":"container","icon":"grid-col","internal":true,"widgetList":[{"key":78747,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"masterTableColumn","label":"meta.masterTableColumn","labelAlign":"","defaultValue":"","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select100757"},{"key":78747,"type":"select","icon":"select-field","formItemFlag":true,"options":{"name":"displayField","label":"meta.displayField","labelAlign":"","defaultValue":"","placeholder":"","columnWidth":"200px","size":"","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"clearable":true,"filterable":true,"allowCreate":false,"remote":false,"automaticDropdown":false,"multiple":false,"multipleLimit":0,"optionItems":[],"required":false,"requiredHint":"","validation":"","validationHint":"","customClass":[],"labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"onCreated":"","onMounted":"","onRemoteQuery":"","onChange":"","onFocus":"","onBlur":"","onValidate":""},"id":"select81771"}],"options":{"name":"gridCol23075","hidden":false,"span":8,"offset":0,"push":0,"pull":0,"responsive":false,"md":12,"sm":12,"xs":12,"customClass":[]},"id":"grid-col-23075"}],"options":{"name":"grid116806","hidden":false,"gutter":12,"colHeight":null,"customClass":[]},"id":"grid116806"},{"key":24954,"type":"switch","icon":"switch-field","formItemFlag":true,"options":{"name":"ready","label":"ready","labelAlign":"","defaultValue":false,"columnWidth":"200px","labelWidth":null,"labelHidden":false,"disabled":false,"hidden":true,"customClass":"","labelIconClass":null,"labelIconPosition":"rear","labelTooltip":null,"switchWidth":40,"activeText":"","inactiveText":"","activeColor":null,"inactiveColor":null,"onCreated":"","onMounted":"","onChange":"","onValidate":""},"id":"switch25328"}],"formConfig":{"modelName":"formData","refName":"vForm","rulesName":"rules","labelWidth":80,"labelPosition":"top","size":"","labelAlign":"label-left-align","cssCode":"","customClass":[],"functions":"","layoutType":"PC","jsonVersion":3,"onFormCreated":"","onFormMounted":"","onFormDataChange":"","onFormValidate":"","saveRemoteOptions":"never","labelFormUniqueName":true,"dataSources":[]}}